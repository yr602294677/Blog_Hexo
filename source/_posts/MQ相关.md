---
title: MQ基础知识
date: 2019-10-17 13:27:44 
categories: "JAVA" 
tags: MQ
description: MQ相关

---



#### 1.为什么使用MQ

​	依据现实场景，描述消息队列的必要性。如各个分公司的数据需要汇总到总公司，由于分公司很多，而且各个公司的数据高峰期时间不定，因此可以引入MQ，以Kafka为例描述MQ的三个优点：

1. 解耦

   总分公司只需要将消息放入不同的通道中，谁对其中数据有需要就自行取数，避免了无意义的交互及繁琐的代码配置，实现了解耦。

2. 削峰

   数据高峰期时，以Mysql为例，每秒大约能处理2千条数据，高峰期有上万条数据同时涌入，借助通道，可以固定抽取最大限度的数据来处理，等高峰期一过，也能迅速处理积压的数据，实现削峰。

3. 异步

   能减少响应时间。如分公司A需要在本地写入数据的同时向总公司写入相同数据，本地写入花费2ms，与总公司通信需要花费20ms，借助MQ，就能大幅减少用户的等待时间。

  当然，MQ也有缺点，主要如下

1. 提高系统复杂性。需要思考消息多次发送、消息丢失、数据不一致等情况。
2. 降低系统可用性。引入外部代码，如果对其不熟悉，容易发生出错无法排查，导致严重后果。

### 2. 

